## Команды бота

- `/start` - Начать работу (регистрирует нового пользователя или приветствует существующего)
- `/stats` - Показать статистику пользователей
- `/help` - Показать список команд

## API пользователей

Доступные методы в `UserService`:

- `findByTelegramId(telegramId)` - поиск пользователя
- `create(userData)` - создание нового пользователя
- `update(telegramId, updateData)` - обновление данных
- `createOrUpdate(userData)` - создание или обновление
- `updateLastActivity(telegramId)` - обновление активности
- `getUsersCount()` - общее количество пользователей
- `getNewUsersToday()` - новые пользователи за сегодня

## Middleware

`userMiddleware()` автоматически:

- Регистрирует новых пользователей при первом обращении
- Обновляет данные существующих пользователей
- Добавляет `ctx.user` и `ctx.isNewUser` в контекст каждого запроса
- Логирует новых пользователей

## Тестирование

1. Запустите бота с Docker
2. Отправьте `/start` - должно появиться приветствие для нового пользователя
3. Отправьте `/stats` - должна показаться статистика с 1 пользователем
4. Перезапустите бота и снова отправьте `/start` - должно появиться приветствие для существующего пользователя
5. Отправьте любое текстовое сообщение - бот повторит его и обновит вашу активность last_name VARCHAR(255),
   language_code VARCHAR(10),
   is_bot BOOLEAN DEFAULT FALSE,
   is_premium BOOLEAN DEFAULT FALSE,
   created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
   updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
   last_activity TIMESTAMP WITH TIME ZONE DEFAULT NOW();

```

## Команды бота

- `/start` - Начать работу (регистрирует нового пользователя или приветствует существующего)
- `/stats` - Показать статистику пользователей
- `/help` - Показать список команд

## API пользователей

Доступные методы в `UserService`:
- `findByTelegramId(telegramId)` - поиск пользователя
- `create(userData)` - создание нового пользователя
- `update(telegramId, updateData)` - обновление данных
- `createOrUpdate(userData)` - создание или обновление
- `updateLastActivity(telegramId)` - обновление активности
- `getUsersCount()` - общее количество пользователей
- `getNewUsersToday()` - новые пользователи за сегодня

## Middleware

`userMiddleware()` автоматически:
- Регистрирует новых пользователей при первом обращении
- Обновляет данные существующих пользователей
- Добавляет `ctx.user` и `ctx.isNewUser` в контекст каждого запроса
- Логирует новых пользователей

## Тестирование

1. Запустите бота с Docker
2. Отправьте `/start` - должно появиться приветствие для нового пользователя
3. Отправьте `/stats` - должна показаться статистика с 1 пользователем
4. Перезапустите бота и снова отправьте `/start` - должно появиться приветствие для существующего пользователя
5. Отправьте любое текстовое сообщение - бот повторит его и обновит вашу активность
```
